---
import MainLayout from '../../layouts/MainLayout.astro';
import MovieCard from '../../components/MovieCard.astro';

const { genre } = Astro.params;

const genreMap: Record<string, { name: string; icon: string; description: string }> = {
  'action': { name: 'Action', icon: 'ğŸ’¥', description: 'Film penuh aksi dan adrenalin' },
  'comedy': { name: 'Comedy', icon: 'ğŸ˜‚', description: 'Film yang menghibur dan bikin ketawa' },
  'drama': { name: 'Drama', icon: 'ğŸ­', description: 'Film dengan cerita emosional yang mendalam' },
  'horror': { name: 'Horror', icon: 'ğŸ‘»', description: 'Film yang menegangkan dan menakutkan' },
  'romance': { name: 'Romance', icon: 'ğŸ’•', description: 'Film cinta yang menghangatkan hati' },
  'sci-fi': { name: 'Sci-Fi', icon: 'ğŸš€', description: 'Film fiksi ilmiah dan teknologi masa depan' },
  'thriller': { name: 'Thriller', icon: 'ğŸ˜°', description: 'Film menegangkan yang bikin deg-degan' },
  'animation': { name: 'Animation', icon: 'ğŸ¨', description: 'Film animasi untuk semua usia' },
  'fantasy': { name: 'Fantasy', icon: 'ğŸ‰', description: 'Film fantasi dengan dunia magis' },
  'documentary': { name: 'Documentary', icon: 'ğŸ“¹', description: 'Film dokumenter tentang kisah nyata' },
  'crime': { name: 'Crime', icon: 'ğŸ”', description: 'Film kriminal dan misteri' },
  'adventure': { name: 'Adventure', icon: 'ğŸ—ºï¸', description: 'Film petualangan yang seru' },
  'family': { name: 'Family', icon: 'ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦', description: 'Film untuk ditonton bersama keluarga' },
  'mystery': { name: 'Mystery', icon: 'ğŸ•µï¸', description: 'Film misteri yang penuh teka-teki' },
  'war': { name: 'War', icon: 'âš”ï¸', description: 'Film perang dan sejarah' },
  'music': { name: 'Music', icon: 'ğŸµ', description: 'Film musikal yang merdu' },
  'history': { name: 'History', icon: 'ğŸ“œ', description: 'Film berdasarkan sejarah' },
  'western': { name: 'Western', icon: 'ğŸ¤ ', description: 'Film koboi dan wild west' },
};

const currentGenre = genreMap[genre ?? ''] || { name: genre, icon: 'ğŸ¬', description: 'Film genre ' + genre };

// Mock movies for this genre
const genreMovies = [
  { id: 101, title: "Dune: Part Two", posterPath: "/1pdfLvkbY9ohJlCjQH2CZjjYVvJ.jpg", releaseDate: "2024-02-28", voteAverage: 8.4 },
  { id: 102, title: "Oppenheimer", posterPath: "/8Gxv8gSFCU0XGDykEGv7zR1n2ua.jpg", releaseDate: "2023-07-19", voteAverage: 8.1 },
  { id: 103, title: "The Dark Knight", posterPath: "/qJ2tW6WMUDux911r6m7haRef0WH.jpg", releaseDate: "2008-07-16", voteAverage: 9.1 },
  { id: 104, title: "Inception", posterPath: "/edv5CZvWj09upOsy2Y6IwDhK8bt.jpg", releaseDate: "2010-07-15", voteAverage: 8.7 },
  { id: 105, title: "Interstellar", posterPath: "/gEU2QniE6E77NI6lCU6MxlNBvIx.jpg", releaseDate: "2014-11-05", voteAverage: 8.6 },
  { id: 106, title: "The Matrix", posterPath: "/f89U3ADr1oiB1s9GkdPOEpXUk5H.jpg", releaseDate: "1999-03-30", voteAverage: 8.7 },
  { id: 107, title: "Mad Max: Fury Road", posterPath: "/8tZYtuWezp8JbcsvHYO0O46tFbo.jpg", releaseDate: "2015-05-13", voteAverage: 7.6 },
  { id: 108, title: "John Wick", posterPath: "/wXqWR7dHncNRbxoEGybEy7QTe9h.jpg", releaseDate: "2014-10-22", voteAverage: 7.4 },
  { id: 109, title: "Top Gun: Maverick", posterPath: "/62HCnUTziyWcpDaBO2i1DG35fXr.jpg", releaseDate: "2022-05-24", voteAverage: 8.3 },
  { id: 110, title: "Avatar: The Way of Water", posterPath: "/t6HIqrRAclMCA60NsSmeqe9RmNV.jpg", releaseDate: "2022-12-14", voteAverage: 7.7 },
  { id: 111, title: "Spider-Man: No Way Home", posterPath: "/1g0dhYtq4irTY1GPXvft6k4YLjm.jpg", releaseDate: "2021-12-15", voteAverage: 8.0 },
  { id: 112, title: "Avengers: Endgame", posterPath: "/or06FN3Dka5tukK1e9sl16pB3iy.jpg", releaseDate: "2019-04-24", voteAverage: 8.3 },
];
---

<MainLayout title={`Genre ${currentGenre.name} - ASTRO`} description={currentGenre.description}>
  <!-- Hero Section -->
  <div class="relative h-[40vh] overflow-hidden">
    <div class="absolute inset-0 bg-gradient-to-br from-primary-500/30 to-violet-500/30"></div>
    <div class="absolute inset-0 bg-gradient-to-t from-dark-500 via-dark-500/50 to-transparent"></div>
    <div class="absolute inset-0 flex items-center justify-center text-center">
      <div>
        <span class="text-6xl mb-4 block">{currentGenre.icon}</span>
        <h1 class="text-4xl md:text-5xl font-display font-bold text-white mb-4">
          {currentGenre.name}
        </h1>
        <p class="text-xl text-secondary-300 max-w-2xl mx-auto">
          {currentGenre.description}
        </p>
      </div>
    </div>
  </div>

  <div class="container-custom py-8">
    <!-- All Genres -->
    <section class="mb-8 -mt-16 relative z-10">
      <div class="card p-4">
        <div class="flex items-center gap-2 overflow-x-auto pb-2 custom-scrollbar">
          {Object.entries(genreMap).map(([key, value]) => (
            <a 
              href={`/genre/${key}`}
              class={`px-4 py-2 rounded-lg whitespace-nowrap transition-all flex items-center gap-2 ${
                key === genre 
                  ? 'bg-primary-500 text-white' 
                  : 'bg-dark-300 text-secondary-300 hover:bg-dark-200'
              }`}
            >
              <span>{value.icon}</span>
              <span>{value.name}</span>
            </a>
          ))}
        </div>
      </div>
    </section>

    <!-- Filters -->
    <div class="flex flex-col md:flex-row items-center justify-between gap-4 mb-8">
      <p class="text-secondary-400">
        Menampilkan <span class="text-white">1-12</span> dari <span class="text-white">1,234</span> film
      </p>
      <div class="flex items-center gap-4">
        <select class="input w-40 text-sm">
          <option value="">Semua Tahun</option>
          <option value="2024">2024</option>
          <option value="2023">2023</option>
          <option value="2022">2022</option>
          <option value="2021">2021</option>
          <option value="2020">2020</option>
        </select>
        <select class="input w-48 text-sm">
          <option value="popularity">Paling Populer</option>
          <option value="rating">Rating Tertinggi</option>
          <option value="newest">Terbaru</option>
          <option value="oldest">Terlama</option>
        </select>
      </div>
    </div>

    <!-- Movies Grid -->
    <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4">
      {genreMovies.map((movie) => (
        <MovieCard 
          id={movie.id}
          title={movie.title}
          posterPath={movie.posterPath}
          releaseDate={movie.releaseDate}
          voteAverage={movie.voteAverage}
        />
      ))}
    </div>

    <!-- Pagination -->
    <div class="flex items-center justify-center gap-2 mt-12">
      <button class="w-10 h-10 rounded-lg bg-dark-300 text-secondary-400 hover:bg-dark-200 transition-colors" disabled>
        <svg class="w-5 h-5 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
      </button>
      <button class="w-10 h-10 rounded-lg bg-primary-500 text-white">1</button>
      <button class="w-10 h-10 rounded-lg bg-dark-300 text-secondary-300 hover:bg-dark-200 transition-colors">2</button>
      <button class="w-10 h-10 rounded-lg bg-dark-300 text-secondary-300 hover:bg-dark-200 transition-colors">3</button>
      <span class="text-secondary-500">...</span>
      <button class="w-10 h-10 rounded-lg bg-dark-300 text-secondary-300 hover:bg-dark-200 transition-colors">103</button>
      <button class="w-10 h-10 rounded-lg bg-dark-300 text-secondary-300 hover:bg-dark-200 transition-colors">
        <svg class="w-5 h-5 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
        </svg>
      </button>
    </div>
  </div>
</MainLayout>
